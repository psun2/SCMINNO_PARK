<%@page import="java.net.URLEncoder"%>
<%@page import="file.FileDTO"%>
<%@page import="java.util.ArrayList"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>파일 업 & 다운로드</title>
</head>
<body>
	<h1>다운로드 페이지</h1>
	<%
		ArrayList<FileDTO> fileList = (ArrayList) request.getAttribute("fileList");
		
		for(FileDTO file : fileList) {
			out.write("<a href=\"/download?file=" 
						// 파일명이 한글이라면 QueryString 즉 get방식으로 보낼때
						// encoding 되지 않아 에러를 발생시킵니다.  
						// 이를 방지하기 위해 java.net 패키지에 있는 URLEncoder 클래스를 사용해서 
						// URL로 인코딩 하여 서버에 보낼 수 있도록 합니다.
						+ URLEncoder.encode(file.getFileName(), "UTF-8") + "\">"
						+ "<span>"
						+ file.getFileRealName() 
						+ "</span>"
						+ "<span>&nbsp;"
						+ "다운로드 횟수: "
						+ file.getDownCount()
						+ " 회"
						+ "</span>"
						+ "<span>&nbsp;"
						+ "파일크기: "
						+ file.getFileSize()
						+ "byte"
						+ "</span>"
						+ "</a>");
		}
	%>
</body>
</html>